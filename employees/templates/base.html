{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}KSK{% endblock %}</title>

    <!-- Tailwind -->
    <link href="{% static 'css/dist/styles.css' %}" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

<!-- –ù–∞–≤–±–∞—Ä -->
<nav class="bg-gray-900 fixed w-full top-0 z-50 shadow-md">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <!-- –õ–æ–≥–æ—Ç–∏–ø -->
      <a href="{% url 'index' %}" class="text-white text-xl font-bold">KSK</a>

      <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –º–æ–±–∏–ª—ã -->
      <button id="menu-toggle" class="lg:hidden text-white focus:outline-none">
        ‚ò∞
      </button>

      <!-- –°—Å—ã–ª–∫–∏ -->
      <div id="menu" class="hidden lg:flex space-x-2 items-center">
        {% if user.is_authenticated %}
          <!-- –ì–ª–∞–≤–Ω–∞—è -->
          <a href="{% url 'index' %}"
             class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700">
            –ì–ª–∞–≤–Ω–∞—è
          </a>

          <!-- –ê–¥–º–∏–Ω -->
          {% if user.is_admin %}
            <a href="/admin/"
               class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700">
              –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
            </a>
          {% endif %}

          <!-- –ê–¥–º–∏–Ω –∏ –º–µ–Ω–µ–¥–∂–µ—Ä -->
          {% if user.is_admin or user.is_manager %}
            <a href="{% url 'create_employee' %}"
               class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700">
              –ù–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
            </a>
            <a href="{% url 'search_employee' %}"
               class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700">
              –ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ
            </a>
            <a href="{% url 'employees_by_region' %}"
               class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700">
              –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ä–µ–≥–∏–æ–Ω–æ–≤
            </a>
          {% elif user.is_viewer %}
            <!-- Viewer -->
            <a href="{% url 'search_employee' %}"
               class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700">
              –ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ
            </a>
            <a href="{% url 'employees_by_region' %}"
               class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700">
              –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ä–µ–≥–∏–æ–Ω–æ–≤
            </a>
          {% endif %}
        {% endif %}

        <!-- –°–ø—Ä–∞–≤–∫–∞ (–¥–ª—è –≤—Å–µ—Ö) -->
        <a href="{% url 'help' %}"
           class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700">
          –°–ø—Ä–∞–≤–∫–∞
        </a>
      </div>

      <!-- –ü—Ä–æ—Ñ–∏–ª—å / –≤—Ö–æ–¥ -->
      <div class="hidden lg:flex items-center space-x-3">
        {% if user.is_authenticated %}
          <span class="text-gray-300 text-sm">
            üë§ –ü—Ä–∏–≤–µ—Ç,
            {% if user.first_name or user.last_name %}
              {{ user.first_name }} {{ user.last_name }}
            {% else %}
              {{ user.username }}
            {% endif %}
            ({{ user.role }})
          </span>
          <a href="{% url 'logout' %}"
             class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-red-600">
            –í—ã—Ö–æ–¥
          </a>
        {% else %}
          <a href="{% url 'login' %}"
             class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-green-600">
            –í—Ö–æ–¥
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
<main class="container mx-auto px-4 pt-20 flex-1">
  {% block content %}{% endblock %}
</main>

<!-- –§—É—Ç–µ—Ä -->
<footer class="bg-gray-900 text-gray-400 text-center py-4 mt-10">
  ¬© {{ now|date:"Y" }} KSK. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. –ú–æ—Å–∫–≤–∞ - 2025
</footer>

<!-- JS –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é -->
<script>
  const btn = document.getElementById('menu-toggle');
  const menu = document.getElementById('menu');
  btn.addEventListener('click', () => {
    menu.classList.toggle('hidden');
  });
</script>

</body>
</html>
